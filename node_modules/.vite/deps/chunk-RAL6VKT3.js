import {
  RtlSymbol,
  createRtl,
  en_default
} from "./chunk-NRIQLJT7.js";
import {
  consoleError,
  consoleWarn,
  getObjectValueByPath
} from "./chunk-OVCH2SYJ.js";
import {
  computed,
  inject,
  provide,
  ref
} from "./chunk-BX7HPCYS.js";

// node_modules/vuetify/lib/composables/locale.mjs
var LocaleAdapterSymbol = Symbol.for("vuetify:locale-adapter");
var VuetifyLocaleSymbol = Symbol.for("vuetify:locale");
function provideLocale(props) {
  const adapter = inject(LocaleAdapterSymbol);
  if (!adapter)
    throw new Error("[Vuetify] Could not find injected locale adapter");
  return adapter.createScope(props);
}
function useLocale() {
  const adapter = inject(LocaleAdapterSymbol);
  if (!adapter)
    throw new Error("[Vuetify] Could not find injected locale adapter");
  return adapter.getScope();
}
function isLocaleAdapter(x) {
  return !!x && x.hasOwnProperty("getScope") && x.hasOwnProperty("createScope") && x.hasOwnProperty("createRoot");
}
function createLocale(app, options) {
  const adapter = isLocaleAdapter(options) ? options : createDefaultLocaleAdapter(options);
  const instance = adapter.createRoot(app);
  app == null ? void 0 : app.provide(RtlSymbol, createRtl(instance, options));
  return adapter;
}
var LANG_PREFIX = "$vuetify.";
var replace = (str, params) => {
  return str.replace(/\{(\d+)\}/g, (match, index) => {
    return String(params[+index]);
  });
};
var createTranslateFunction = (current, fallback, messages) => {
  return function(key) {
    for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      params[_key - 1] = arguments[_key];
    }
    if (!key.startsWith(LANG_PREFIX)) {
      return replace(key, params);
    }
    const shortKey = key.replace(LANG_PREFIX, "");
    const currentLocale = current.value && messages.value[current.value];
    const fallbackLocale = fallback.value && messages.value[fallback.value];
    let str = getObjectValueByPath(currentLocale, shortKey, null);
    if (!str) {
      consoleWarn(`Translation key "${key}" not found in "${current.value}", trying fallback locale`);
      str = getObjectValueByPath(fallbackLocale, shortKey, null);
    }
    if (!str) {
      consoleError(`Translation key "${key}" not found in fallback`);
      str = key;
    }
    if (typeof str !== "string") {
      consoleError(`Translation key "${key}" has a non-string value`);
      str = key;
    }
    return replace(str, params);
  };
};
function createNumberFunction(current, fallback) {
  return (value, options) => {
    const numberFormat = new Intl.NumberFormat([current.value, fallback.value], options);
    return numberFormat.format(value);
  };
}
function createDefaultLocaleAdapter(options) {
  const createScope = (options2) => {
    const current = ref(options2.current);
    const fallback = ref(options2.fallback);
    const messages = ref(options2.messages);
    return {
      current,
      fallback,
      messages,
      t: createTranslateFunction(current, fallback, messages),
      n: createNumberFunction(current, fallback)
    };
  };
  return {
    createRoot: (app) => {
      var _a, _b, _c;
      const rootScope = createScope({
        current: (_a = options == null ? void 0 : options.defaultLocale) != null ? _a : "en",
        fallback: (_b = options == null ? void 0 : options.fallbackLocale) != null ? _b : "en",
        messages: (_c = options == null ? void 0 : options.messages) != null ? _c : {
          en: en_default
        }
      });
      if (!app)
        throw new Error("[Vuetify] Could not find default app instance");
      app.provide(VuetifyLocaleSymbol, rootScope);
      return rootScope;
    },
    getScope: () => {
      const currentScope = inject(VuetifyLocaleSymbol);
      if (!currentScope)
        throw new Error("[Vuetify] Could not find injected locale instance");
      return currentScope;
    },
    createScope: (options2) => {
      const currentScope = inject(VuetifyLocaleSymbol);
      if (!currentScope)
        throw new Error("[Vuetify] Could not find injected locale instance");
      const newScope = createScope({
        current: computed(() => {
          var _a;
          return (_a = options2 == null ? void 0 : options2.locale) != null ? _a : currentScope.current.value;
        }),
        fallback: computed(() => {
          var _a;
          return (_a = options2 == null ? void 0 : options2.locale) != null ? _a : currentScope.fallback.value;
        }),
        messages: computed(() => {
          var _a;
          return (_a = options2 == null ? void 0 : options2.messages) != null ? _a : currentScope.messages.value;
        })
      });
      provide(VuetifyLocaleSymbol, newScope);
      return newScope;
    }
  };
}

export {
  LocaleAdapterSymbol,
  provideLocale,
  useLocale,
  createLocale
};
//# sourceMappingURL=chunk-RAL6VKT3.js.map
