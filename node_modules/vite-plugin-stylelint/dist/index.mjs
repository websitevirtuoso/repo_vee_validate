import {createRequire} from 'module';var require=createRequire(import.meta.url);
var T=Object.create;var F=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var G=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty;var O=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,l)=>(typeof require!="undefined"?require:t)[l]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var K=(e,t,l,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of B(t))!J.call(e,n)&&n!==l&&F(e,n,{get:()=>t[n],enumerable:!(s=q(t,n))||s.enumerable});return e};var L=(e,t,l)=>(l=e!=null?T(G(e)):{},K(t||!e||!e.__esModule?F(l,"default",{value:e,enumerable:!0}):l,e));import{createFilter as N,normalizePath as Q}from"@rollup/pluginutils";import U from"node:fs";import X from"node:path";function Y(e={}){var h,P,S,w,E,v,b,W,x;let t=(h=e==null?void 0:e.cache)!=null?h:!0,l="",s=(P=e==null?void 0:e.include)!=null?P:["src/**/*.css","src/**/*.scss","src/**/*.sass","src/**/*.less","src/**/*.styl","src/**/*.vue","src/**/*.svelte"],n=(S=e==null?void 0:e.exclude)!=null?S:["node_modules","virtual:"],o=(w=e==null?void 0:e.stylelintPath)!=null?w:"stylelint",V=(E=e==null?void 0:e.lintOnStart)!=null?E:!1,C=(v=e==null?void 0:e.emitError)!=null?v:!0,_=(b=e==null?void 0:e.emitErrorAsWarning)!=null?b:!1,$=(W=e==null?void 0:e.emitWarning)!=null?W:!0,j=(x=e==null?void 0:e.emitWarningAsError)!=null?x:!1,k=N(s,n),z=a=>!U.existsSync(a),y,d;return{name:"vite:stylelint",configResolved(a){var r;l=(r=e==null?void 0:e.cacheLocation)!=null?r:X.resolve(a.cacheDir,"vite-plugin-stylelint")},async buildStart(){var a;if(!y)try{y=(await Promise.resolve().then(()=>L(O(o)))).default,d=async(i,D)=>await y.lint({...e,allowEmptyInput:!0,cache:t,cacheLocation:l,files:D}).then(c=>{if(!c)return;let{results:u}=c;u.forEach(H=>{let{warnings:I,ignored:M}=H;M||I.forEach(R=>{console.log("");let{severity:A,text:m,line:f,column:g}=R;A==="error"&&C?_?i.warn(m,{line:f,column:g}):i.error(m,{line:f,column:g}):A==="warning"&&$&&(j?i.error(m,{line:f,column:g}):i.warn(m,{line:f,column:g}))})})}).catch(c=>{var u;console.log(""),i.error(`${(u=c==null?void 0:c.message)!=null?u:c}`)})}catch(r){console.log(""),this.error(`${(a=r==null?void 0:r.message)!=null?a:"Failed to import Stylelint. Have you installed and configured correctly?"}`)}V&&(console.log(""),this.warn("Stylelint is linting all files in the project because `lintOnStart` is true. This will significantly slow down Vite."),await d(this,s))},async transform(a,r){let i=Q(r).split("?")[0];return!k(i)||z(i)||await d(this,i),null}}}export{Y as default};
